/*C2*/SET SCHEMA PUBLIC
CONNECT USER SA
drop table movie\u000a
drop table session\u000a\u000a
drop table type\u000a\u000a
CREATE TABLE ROOM\u000a(ID INTEGER NOT NULL IDENTITY,\u000aACCESS VARCHAR(25),\u000aSEATINGCAPACITY INTEGER,\u000aPRIMARY KEY (ID))
\u000a\u000aCREATE TABLE SESSIONTYPE\u000a(ID INTEGER NOT NULL IDENTITY,\u000aNAME VARCHAR(25),\u000aSTARTTIME TIME,\u000aCOST DOUBLE,\u000aPRIMARY KEY (ID))
\u000a\u000aCREATE TABLE CUSTOMER\u000a(ID INTEGER NOT NULL IDENTITY,\u000aNAME VARCHAR(25),\u000aSURNAMES VARCHAR(25),\u000aEMAIL VARCHAR(25),\u000aCREDITCARD VARCHAR(25),\u000aPRIMARY KEY (ID))
\u000a\u000aCREATE TABLE MOVIE\u000a(ID INTEGER NOT NULL IDENTITY,\u000aNAME VARCHAR(25),\u000aCATEGORY VARCHAR(25),\u000aSYNOPSIS LONGVARCHAR,\u000aPRIMARY KEY (ID))
\u000a\u000aCREATE TABLE SESSION\u000a(ID INTEGER NOT NULL IDENTITY,\u000aID_ROOM INTEGER,\u000aID_MOVIE INTEGER,\u000aID_SESSIONTYPE INTEGER,\u000aSTARTDATE DATE,\u000aENDDATE DATE,\u000aPRIMARY KEY (ID))
\u000a\u000aALTER TABLE SESSION\u000aADD FOREIGN KEY (ID_ROOM) \u000aREFERENCES ROOM(ID)
\u000a\u000aALTER TABLE SESSION\u000aADD FOREIGN KEY (ID_MOVIE) \u000aREFERENCES MOVIE(ID)
\u000a\u000aALTER TABLE SESSION\u000aADD FOREIGN KEY (ID_SESSIONTYPE) \u000aREFERENCES SESSIONTYPE(ID)
\u000a\u000aCREATE TABLE PLACE\u000a(ID INTEGER NOT NULL IDENTITY,\u000aID_SESSION INTEGER,\u000aROWSEAT INTEGER,\u000aSEAT INTEGER,\u000aID_CUSTOMER INTEGER,\u000aCREDITCARD VARCHAR(25),\u000aAMOUNT DOUBLE,\u000aPAYMENTDATE DATE,\u000aPRIMARY KEY (ID))
\u000a\u000aALTER TABLE PLACE\u000aADD FOREIGN KEY (ID_SESSION) \u000aREFERENCES SESSION(ID)
\u000a\u000aALTER TABLE PUBLIC.PLACE\u000aADD FOREIGN KEY (ID_CUSTOMER) \u000aREFERENCES CUSTOMER(ID)
\u000a\u000aCREATE TABLE SYSTEMUSER\u000a(ID INTEGER NOT NULL IDENTITY,\u000aLOGIN VARCHAR(25) NOT NULL,\u000aPASSW VARCHAR(25),\u000aTYPE VARCHAR(25),\u000aMSALE BOOLEAN,\u000aMSESSION BOOLEAN,\u000aMMOVIES BOOLEAN,\u000aPRIMARY KEY (ID),\u000aUNIQUE (LOGIN))
INSERT INTO CUSTOMER VALUES(0,'TVP','TVP','TVP@ENTRECINE',NULL)
DELETE FROM CUSTOMER WHERE ID=0
INSERT INTO CUSTOMER VALUES(1,'TVP','TVP','TVP@ENTRECINE','')
INSERT INTO SYSTEMUSER VALUES(0,'admin','admin','admin',TRUE,TRUE,TRUE)
INSERT INTO SYSTEMUSER VALUES(1,'user','user','user',TRUE,FALSE,FALSE)
DROP TABLE PLACE
\u000aDROP TABLE SESSION
\u000aDROP TABLE SESSIONTYPE
\u000aDROP TABLE MOVIE
\u000aDROP TABLE ROOM
\u000aDROP TABLE SYSTEMUSER
\u000a\u000aCREATE TABLE ROOM\u000a(ID INTEGER NOT NULL IDENTITY,\u000aACCESS VARCHAR(25),\u000aSEATINGCAPACITY INTEGER,\u000aPRIMARY KEY (ID))
\u000a\u000aCREATE TABLE SESSIONTYPE\u000a(ID INTEGER NOT NULL IDENTITY,\u000aNAME VARCHAR(25),\u000aSTARTTIME TIME,\u000aCOST DOUBLE,\u000aPRIMARY KEY (ID))
DROP TABLE customer\u000a
DROP TABLE room
DROP TABLE sessiontype
\u000aCREATE TABLE ROOM\u000a(ID INTEGER NOT NULL IDENTITY,\u000aACCESS VARCHAR(25),\u000aSEATINGCAPACITY INTEGER,\u000aPRIMARY KEY (ID))
\u000a\u000aCREATE TABLE SESSIONTYPE\u000a(ID INTEGER NOT NULL IDENTITY,\u000aNAME VARCHAR(25),\u000aSTARTTIME TIME,\u000aCOST DOUBLE,\u000aPRIMARY KEY (ID))
\u000a\u000aCREATE TABLE CUSTOMER\u000a(ID INTEGER NOT NULL IDENTITY,\u000aNAME VARCHAR(25),\u000aSURNAMES VARCHAR(25),\u000aEMAIL VARCHAR(25),\u000aCREDITCARD VARCHAR(25),\u000aPRIMARY KEY (ID))
\u000a\u000aCREATE TABLE MOVIE\u000a(ID INTEGER NOT NULL IDENTITY,\u000aNAME VARCHAR(25),\u000aCATEGORY VARCHAR(25),\u000aSYNOPSIS LONGVARCHAR,\u000aPRIMARY KEY (ID))
\u000a\u000aCREATE TABLE SESSION\u000a(ID INTEGER NOT NULL IDENTITY,\u000aID_ROOM INTEGER,\u000aID_MOVIE INTEGER,\u000aID_SESSIONTYPE INTEGER,\u000aSTARTDATE DATE,\u000aENDDATE DATE,\u000aPRIMARY KEY (ID))
\u000a\u000aALTER TABLE SESSION\u000aADD FOREIGN KEY (ID_ROOM) \u000aREFERENCES ROOM(ID)
\u000a\u000aALTER TABLE SESSION\u000aADD FOREIGN KEY (ID_MOVIE) \u000aREFERENCES MOVIE(ID)
\u000a\u000aALTER TABLE SESSION\u000aADD FOREIGN KEY (ID_SESSIONTYPE) \u000aREFERENCES SESSIONTYPE(ID)
\u000a\u000aCREATE TABLE PLACE\u000a(ID INTEGER NOT NULL IDENTITY,\u000aID_SESSION INTEGER,\u000aROWSEAT INTEGER,\u000aSEAT INTEGER,\u000aID_CUSTOMER INTEGER,\u000aCREDITCARD VARCHAR(25),\u000aAMOUNT DOUBLE,\u000aPAYMENTDATE DATE,\u000aPRIMARY KEY (ID))
\u000a\u000aALTER TABLE PLACE\u000aADD FOREIGN KEY (ID_SESSION) \u000aREFERENCES SESSION(ID)
\u000a\u000aALTER TABLE PUBLIC.PLACE\u000aADD FOREIGN KEY (ID_CUSTOMER) \u000aREFERENCES CUSTOMER(ID)
\u000a\u000aCREATE TABLE SYSTEMUSER\u000a(ID INTEGER NOT NULL IDENTITY,\u000aLOGIN VARCHAR(25) NOT NULL,\u000aPASSW VARCHAR(25),\u000aTYPE VARCHAR(25),\u000aMSALE BOOLEAN,\u000aMSESSION BOOLEAN,\u000aMMOVIES BOOLEAN,\u000aPRIMARY KEY (ID),\u000aUNIQUE (LOGIN))
INSERT INTO CUSTOMER VALUES(0,'TVP','TVP','TVP@ENTRECINE','')
INSERT INTO SYSTEMUSER VALUES(0,'admin','admin','admin',TRUE,TRUE,TRUE)
INSERT INTO SYSTEMUSER VALUES(1,'user','user','user',TRUE,FALSE,FALSE)
DISCONNECT
