DROP TABLE PLACE;
DROP TABLE SESSION;
DROP TABLE SESSIONTYPE;
DROP TABLE CUSTOMER;
DROP TABLE MOVIE;
DROP TABLE ROOM;
DROP TABLE SYSTEMUSER;

CREATE TABLE ROOM
(ID INTEGER NOT NULL IDENTITY,
ACCESS VARCHAR(25),
SEATINGCAPACITY INTEGER,
PRIMARY KEY (ID));

CREATE TABLE SESSIONTYPE
(ID INTEGER NOT NULL IDENTITY,
NAME VARCHAR(25),
STARTTIME TIME,
COST DOUBLE,
PRIMARY KEY (ID));

CREATE TABLE CUSTOMER
(ID INTEGER NOT NULL IDENTITY,
NAME VARCHAR(25),
SURNAMES VARCHAR(25),
EMAIL VARCHAR(25),
CREDITCARD VARCHAR(25),
PRIMARY KEY (ID));

CREATE TABLE MOVIE
(ID INTEGER NOT NULL IDENTITY,
NAME VARCHAR(25),
CATEGORY VARCHAR(25),
SYNOPSIS LONGVARCHAR,
PRIMARY KEY (ID));

CREATE TABLE SESSION
(ID INTEGER NOT NULL IDENTITY,
ID_ROOM INTEGER,
ID_MOVIE INTEGER,
ID_SESSIONTYPE INTEGER,
STARTDATE DATE,
ENDDATE DATE,
PRIMARY KEY (ID));

ALTER TABLE SESSION
ADD FOREIGN KEY (ID_ROOM) 
REFERENCES ROOM(ID);

ALTER TABLE SESSION
ADD FOREIGN KEY (ID_MOVIE) 
REFERENCES MOVIE(ID);

ALTER TABLE SESSION
ADD FOREIGN KEY (ID_SESSIONTYPE) 
REFERENCES SESSIONTYPE(ID);

CREATE TABLE PLACE
(ID INTEGER NOT NULL IDENTITY,
ID_SESSION INTEGER,
ROWSEAT INTEGER,
SEAT INTEGER,
ID_CUSTOMER INTEGER,
CREDITCARD VARCHAR(25),
AMOUNT DOUBLE,
PAYMENTDATE DATE,
PRIMARY KEY (ID));

ALTER TABLE PLACE
ADD FOREIGN KEY (ID_SESSION) 
REFERENCES SESSION(ID);

ALTER TABLE PUBLIC.PLACE
ADD FOREIGN KEY (ID_CUSTOMER) 
REFERENCES CUSTOMER(ID);

CREATE TABLE SYSTEMUSER
(ID INTEGER NOT NULL IDENTITY,
LOGIN VARCHAR(25) NOT NULL,
PASSW VARCHAR(25),
TYPE VARCHAR(25),
MSALE BOOLEAN,
MSESSION BOOLEAN,
MMOVIES BOOLEAN,
PRIMARY KEY (ID),
UNIQUE (LOGIN));

insert into customer (name,surnames,email,creditcard)
 values ('TVP','TVP','TVP@ENTRECINE','');

insert into systemuser (login,passw,type,msale,msession,mmovies)
values('admin','admin','admin',true,true,true);

insert into systemuser (login,passw,type,msale,msession,mmovies)
values('user','user','user',true,false,false);